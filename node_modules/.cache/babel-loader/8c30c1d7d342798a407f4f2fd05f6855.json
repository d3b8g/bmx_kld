{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\d3b8g\\\\Desktop\\\\service_dub\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\d3b8g\\\\Desktop\\\\service_dub\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\d3b8g\\\\Desktop\\\\service_dub\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\d3b8g\\\\Desktop\\\\service_dub\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\d3b8g\\\\Desktop\\\\service_dub\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\d3b8g\\\\Desktop\\\\service_dub\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\d3b8g\\\\Desktop\\\\service_dub\\\\src\\\\App.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { goBack, closeModal, setStory } from \"./js/store/router/actions\";\nimport * as VK from './js/services/VK';\nimport { Epic, View, Root, Tabbar, ModalRoot, TabbarItem, ConfigProvider } from \"@vkontakte/vkui\";\nimport Icon28Newsfeed from '@vkontakte/icons/dist/28/newsfeed';\nimport Icon28More from '@vkontakte/icons/dist/28/more';\nimport HomePanelBase from './js/panels/home/base';\nimport HomePanelGroups from './js/panels/home/groups';\nimport MorePanelBase from './js/panels/more/base';\nimport MorePanelExample from './js/panels/more/example';\nimport HomeBotsListModal from './js/components/modals/HomeBotsListModal';\nimport HomeBotInfoModal from './js/components/modals/HomeBotInfoModal';\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.lastAndroidBackAction = 0;\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          goBack = _this$props.goBack,\n          dispatch = _this$props.dispatch;\n      dispatch(VK.initApp());\n\n      window.onpopstate = function () {\n        var timeNow = +new Date();\n\n        if (timeNow - _this2.lastAndroidBackAction > 500) {\n          _this2.lastAndroidBackAction = timeNow;\n          goBack('Android');\n        } else {\n          window.history.pushState(null, null);\n        }\n      };\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState, snapshot) {\n      var _this$props2 = this.props,\n          activeView = _this$props2.activeView,\n          activeStory = _this$props2.activeStory,\n          activePanel = _this$props2.activePanel,\n          scrollPosition = _this$props2.scrollPosition;\n\n      if (prevProps.activeView !== activeView || prevProps.activePanel !== activePanel || prevProps.activeStory !== activeStory) {\n        var pageScrollPosition = scrollPosition[activeStory + \"_\" + activeView + \"_\" + activePanel] || 0;\n        window.scroll(0, pageScrollPosition);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          goBack = _this$props3.goBack,\n          setStory = _this$props3.setStory,\n          closeModal = _this$props3.closeModal,\n          popouts = _this$props3.popouts,\n          activeView = _this$props3.activeView,\n          activeStory = _this$props3.activeStory,\n          activePanel = _this$props3.activePanel,\n          activeModals = _this$props3.activeModals,\n          panelsHistory = _this$props3.panelsHistory,\n          colorScheme = _this$props3.colorScheme;\n      var history = panelsHistory[activeView] === undefined ? [activeView] : panelsHistory[activeView];\n      var popout = popouts[activeView] === undefined ? null : popouts[activeView];\n      var activeModal = activeModals[activeView] === undefined ? null : activeModals[activeView];\n      var homeModals = React.createElement(ModalRoot, {\n        activeModal: activeModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(HomeBotsListModal, {\n        id: \"MODAL_PAGE_BOTS_LIST\",\n        onClose: function onClose() {\n          return closeModal();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }), React.createElement(HomeBotInfoModal, {\n        id: \"MODAL_PAGE_BOT_INFO\",\n        onClose: function onClose() {\n          return closeModal();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }));\n      return React.createElement(ConfigProvider, {\n        isWebView: true,\n        scheme: colorScheme,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(Epic, {\n        activeStory: activeStory,\n        tabbar: React.createElement(Tabbar, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, React.createElement(TabbarItem, {\n          onClick: function onClick() {\n            return setStory('home', 'base');\n          },\n          selected: activeStory === 'home',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, React.createElement(Icon28Newsfeed, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        })), React.createElement(TabbarItem, {\n          onClick: function onClick() {\n            return setStory('more', 'callmodal');\n          },\n          selected: activeStory === 'more',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, React.createElement(Icon28More, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }))),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(Root, {\n        id: \"home\",\n        activeView: activeView,\n        popout: popout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(View, {\n        id: \"home\",\n        modal: homeModals,\n        activePanel: activePanel,\n        history: history,\n        onSwipeBack: function onSwipeBack() {\n          return goBack();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(HomePanelBase, {\n        id: \"base\",\n        withoutEpic: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }), React.createElement(HomePanelGroups, {\n        id: \"groups\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }))), React.createElement(Root, {\n        id: \"more\",\n        activeView: activeView,\n        popout: popout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(View, {\n        id: \"more\",\n        modal: homeModals,\n        activePanel: activePanel,\n        history: history,\n        onSwipeBack: function onSwipeBack() {\n          return goBack();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(MorePanelBase, {\n        id: \"callmodal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      })), React.createElement(View, {\n        id: \"modal\",\n        modal: homeModals,\n        activePanel: activePanel,\n        history: history,\n        onSwipeBack: function onSwipeBack() {\n          return goBack();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(MorePanelExample, {\n        id: \"filters\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    activeView: state.router.activeView,\n    activePanel: state.router.activePanel,\n    activeStory: state.router.activeStory,\n    panelsHistory: state.router.panelsHistory,\n    activeModals: state.router.activeModals,\n    popouts: state.router.popouts,\n    scrollPosition: state.router.scrollPosition,\n    colorScheme: state.vkui.colorScheme\n  };\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return _objectSpread({\n    dispatch: dispatch\n  }, bindActionCreators({\n    setStory: setStory,\n    goBack: goBack,\n    closeModal: closeModal\n  }, dispatch));\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"sources":["C:/Users/d3b8g/Desktop/service_dub/src/App.js"],"names":["React","connect","bindActionCreators","goBack","closeModal","setStory","VK","Epic","View","Root","Tabbar","ModalRoot","TabbarItem","ConfigProvider","Icon28Newsfeed","Icon28More","HomePanelBase","HomePanelGroups","MorePanelBase","MorePanelExample","HomeBotsListModal","HomeBotInfoModal","App","props","lastAndroidBackAction","dispatch","initApp","window","onpopstate","timeNow","Date","history","pushState","prevProps","prevState","snapshot","activeView","activeStory","activePanel","scrollPosition","pageScrollPosition","scroll","popouts","activeModals","panelsHistory","colorScheme","undefined","popout","activeModal","homeModals","Component","mapStateToProps","state","router","vkui","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux'\r\nimport {goBack, closeModal, setStory} from \"./js/store/router/actions\";\r\nimport * as VK from './js/services/VK';\r\n\r\nimport {Epic, View, Root, Tabbar, ModalRoot, TabbarItem, ConfigProvider} from \"@vkontakte/vkui\";\r\n\r\nimport Icon28Newsfeed from '@vkontakte/icons/dist/28/newsfeed';\r\nimport Icon28More from '@vkontakte/icons/dist/28/more';\r\n\r\nimport HomePanelBase from './js/panels/home/base';\r\nimport HomePanelGroups from './js/panels/home/groups';\r\n\r\nimport MorePanelBase from './js/panels/more/base';\r\nimport MorePanelExample from './js/panels/more/example';\r\n\r\nimport HomeBotsListModal from './js/components/modals/HomeBotsListModal';\r\nimport HomeBotInfoModal from './js/components/modals/HomeBotInfoModal';\r\n\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.lastAndroidBackAction = 0;\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {goBack, dispatch} = this.props;\r\n\r\n        dispatch(VK.initApp());\r\n\r\n        window.onpopstate = () => {\r\n            let timeNow = +new Date();\r\n\r\n            if (timeNow - this.lastAndroidBackAction > 500) {\r\n                this.lastAndroidBackAction = timeNow;\r\n\r\n                goBack('Android');\r\n            } else {\r\n                window.history.pushState(null, null);\r\n            }\r\n        };\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {activeView, activeStory, activePanel, scrollPosition} = this.props;\r\n\r\n        if (\r\n            prevProps.activeView !== activeView ||\r\n            prevProps.activePanel !== activePanel ||\r\n            prevProps.activeStory !== activeStory\r\n        ) {\r\n            let pageScrollPosition = scrollPosition[activeStory + \"_\" + activeView + \"_\" + activePanel] || 0;\r\n\r\n            window.scroll(0, pageScrollPosition);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {goBack, setStory, closeModal, popouts, activeView, activeStory, activePanel, activeModals, panelsHistory, colorScheme} = this.props;\r\n\r\n        let history = (panelsHistory[activeView] === undefined) ? [activeView] : panelsHistory[activeView];\r\n        let popout = (popouts[activeView] === undefined) ? null : popouts[activeView];\r\n        let activeModal = (activeModals[activeView] === undefined) ? null : activeModals[activeView];\r\n\r\n        const homeModals = (\r\n            <ModalRoot activeModal={activeModal}>\r\n                <HomeBotsListModal\r\n                    id=\"MODAL_PAGE_BOTS_LIST\"\r\n                    onClose={() => closeModal()}\r\n                />\r\n                <HomeBotInfoModal\r\n                    id=\"MODAL_PAGE_BOT_INFO\"\r\n                    onClose={() => closeModal()}\r\n                />\r\n            </ModalRoot>\r\n        );\r\n\r\n        return (\r\n            <ConfigProvider isWebView={true} scheme={colorScheme}>\r\n                <Epic activeStory={activeStory} tabbar={\r\n                    <Tabbar>\r\n                        <TabbarItem\r\n                            onClick={() => setStory('home', 'base')}\r\n                            selected={activeStory === 'home'}\r\n                        ><Icon28Newsfeed/></TabbarItem>\r\n                        <TabbarItem\r\n                            onClick={() => setStory('more', 'callmodal')}\r\n                            selected={activeStory === 'more'}\r\n                        ><Icon28More/></TabbarItem>\r\n                    </Tabbar>\r\n                }>\r\n                    <Root id=\"home\" activeView={activeView} popout={popout}>\r\n                        <View\r\n                            id=\"home\"\r\n                            modal={homeModals}\r\n                            activePanel={activePanel}\r\n                            history={history}\r\n                            onSwipeBack={() => goBack()}\r\n                        >\r\n                            <HomePanelBase id=\"base\" withoutEpic={false}/>\r\n                            <HomePanelGroups id=\"groups\"/>\r\n                        </View>\r\n                    </Root>\r\n                    <Root id=\"more\" activeView={activeView} popout={popout}>\r\n                        <View\r\n                            id=\"more\"\r\n                            modal={homeModals}\r\n                            activePanel={activePanel}\r\n                            history={history}\r\n                            onSwipeBack={() => goBack()}\r\n                        >\r\n                            <MorePanelBase id=\"callmodal\"/>\r\n                        </View>\r\n                        <View\r\n                            id=\"modal\"\r\n                            modal={homeModals}\r\n                            activePanel={activePanel}\r\n                            history={history}\r\n                            onSwipeBack={() => goBack()}\r\n                        >\r\n                            <MorePanelExample id=\"filters\"/>\r\n                        </View>\r\n                    </Root>\r\n                </Epic>\r\n            </ConfigProvider>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        activeView: state.router.activeView,\r\n        activePanel: state.router.activePanel,\r\n        activeStory: state.router.activeStory,\r\n        panelsHistory: state.router.panelsHistory,\r\n        activeModals: state.router.activeModals,\r\n        popouts: state.router.popouts,\r\n        scrollPosition: state.router.scrollPosition,\r\n\r\n        colorScheme: state.vkui.colorScheme\r\n    };\r\n};\r\n\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        dispatch,\r\n        ...bindActionCreators({setStory, goBack, closeModal}, dispatch)\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);"]},"metadata":{},"sourceType":"module"}