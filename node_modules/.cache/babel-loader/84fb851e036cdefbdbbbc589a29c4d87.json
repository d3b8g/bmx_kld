{"ast":null,"code":"import VKConnectOld from \"@vkontakte/vk-connect\";\nimport VKConnect from \"@vkontakte/vkui-connect-promise\";\nimport { store } from \"../../index\";\nimport { setColorScheme, setAccessToken } from \"../store/vk/actions\";\nvar APP_ID = 6984089;\nvar API_VERSION = '5.92';\nexport var initApp = function initApp() {\n  return function (dispatch) {\n    var VKConnectOldCallback = function VKConnectOldCallback(e) {\n      if (e.detail.type === 'VKWebAppUpdateConfig') {\n        VKConnectOld.unsubscribe(VKConnectOldCallback);\n        dispatch(setColorScheme(e.detail.data.scheme));\n      }\n    };\n\n    VKConnectOld.subscribe(VKConnectOldCallback);\n    VKConnect.send('VKWebAppInit', {});\n  };\n};\nexport var getAuthToken = function getAuthToken(scope) {\n  return function (dispatch) {\n    VKConnect.send(\"VKWebAppGetAuthToken\", {\n      \"app_id\": APP_ID,\n      \"scope\": scope.join(',')\n    }).then(function (data) {\n      dispatch(setAccessToken(data.data.access_token));\n    }).catch(function () {\n      dispatch(setAccessToken(null));\n    });\n  };\n};\nexport var closeApp = function closeApp() {\n  VKConnect.send(\"VKWebAppClose\", {\n    \"status\": \"success\"\n  });\n};\nexport var swipeBackOn = function swipeBackOn() {\n  VKConnect.send(\"VKWebAppEnableSwipeBack\", {});\n};\nexport var swipeBackOff = function swipeBackOff() {\n  VKConnect.send(\"VKWebAppDisableSwipeBack\", {});\n};\nexport var groupsGet = function groupsGet() {\n  return APICall('groups.get', {\n    \"extended\": \"1\",\n    \"fields\": \"description\",\n    \"count\": \"100\"\n  });\n};\nexport var APICall = function APICall(method, params) {\n  params['access_token'] = store.getState().vkui.accessToken;\n  params['v'] = params['v'] === undefined ? API_VERSION : params['v'];\n  return VKConnect.send(\"VKWebAppCallAPIMethod\", {\n    \"method\": method,\n    \"params\": params\n  }).then(function (data) {\n    return data.data.response;\n  }).catch(function (error) {\n    return error;\n  });\n};","map":{"version":3,"sources":["C:/Users/d3b8g/Desktop/service_dub/src/js/services/VK.js"],"names":["VKConnectOld","VKConnect","store","setColorScheme","setAccessToken","APP_ID","API_VERSION","initApp","dispatch","VKConnectOldCallback","e","detail","type","unsubscribe","data","scheme","subscribe","send","getAuthToken","scope","join","then","access_token","catch","closeApp","swipeBackOn","swipeBackOff","groupsGet","APICall","method","params","getState","vkui","accessToken","undefined","response","error"],"mappings":"AAAA,OAAOA,YAAP,MAAyB,uBAAzB;AACA,OAAOC,SAAP,MAAsB,iCAAtB;AAEA,SAAQC,KAAR,QAAoB,aAApB;AAEA,SAAQC,cAAR,EAAwBC,cAAxB,QAA6C,qBAA7C;AAEA,IAAMC,MAAM,GAAG,OAAf;AACA,IAAMC,WAAW,GAAG,MAApB;AAEA,OAAO,IAAMC,OAAO,GAAG,SAAVA,OAAU;AAAA,SAAM,UAACC,QAAD,EAAc;AACvC,QAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACC,CAAD,EAAO;AAChC,UAAIA,CAAC,CAACC,MAAF,CAASC,IAAT,KAAkB,sBAAtB,EAA8C;AAC1CZ,QAAAA,YAAY,CAACa,WAAb,CAAyBJ,oBAAzB;AAEAD,QAAAA,QAAQ,CAACL,cAAc,CAACO,CAAC,CAACC,MAAF,CAASG,IAAT,CAAcC,MAAf,CAAf,CAAR;AACH;AACJ,KAND;;AAQAf,IAAAA,YAAY,CAACgB,SAAb,CAAuBP,oBAAvB;AACAR,IAAAA,SAAS,CAACgB,IAAV,CAAe,cAAf,EAA+B,EAA/B;AACH,GAXsB;AAAA,CAAhB;AAaP,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,KAAD;AAAA,SAAW,UAACX,QAAD,EAAc;AACjDP,IAAAA,SAAS,CAACgB,IAAV,CAAe,sBAAf,EAAuC;AACnC,gBAAUZ,MADyB;AAEnC,eAASc,KAAK,CAACC,IAAN,CAAW,GAAX;AAF0B,KAAvC,EAGGC,IAHH,CAGQ,UAAAP,IAAI,EAAI;AACZN,MAAAA,QAAQ,CAACJ,cAAc,CAACU,IAAI,CAACA,IAAL,CAAUQ,YAAX,CAAf,CAAR;AACH,KALD,EAKGC,KALH,CAKS,YAAM;AACXf,MAAAA,QAAQ,CAACJ,cAAc,CAAC,IAAD,CAAf,CAAR;AACH,KAPD;AAQH,GAT2B;AAAA,CAArB;AAWP,OAAO,IAAMoB,QAAQ,GAAG,SAAXA,QAAW,GAAM;AAC1BvB,EAAAA,SAAS,CAACgB,IAAV,CAAe,eAAf,EAAgC;AAAC,cAAU;AAAX,GAAhC;AACH,CAFM;AAIP,OAAO,IAAMQ,WAAW,GAAG,SAAdA,WAAc,GAAM;AAC7BxB,EAAAA,SAAS,CAACgB,IAAV,CAAe,yBAAf,EAA0C,EAA1C;AACH,CAFM;AAIP,OAAO,IAAMS,YAAY,GAAG,SAAfA,YAAe,GAAM;AAC9BzB,EAAAA,SAAS,CAACgB,IAAV,CAAe,0BAAf,EAA2C,EAA3C;AACH,CAFM;AAIP,OAAO,IAAMU,SAAS,GAAG,SAAZA,SAAY,GAAM;AAC3B,SAAOC,OAAO,CAAC,YAAD,EAAe;AACzB,gBAAY,GADa;AAEzB,cAAU,aAFe;AAGzB,aAAS;AAHgB,GAAf,CAAd;AAKH,CANM;AAQP,OAAO,IAAMA,OAAO,GAAG,SAAVA,OAAU,CAACC,MAAD,EAASC,MAAT,EAAoB;AACvCA,EAAAA,MAAM,CAAC,cAAD,CAAN,GAAyB5B,KAAK,CAAC6B,QAAN,GAAiBC,IAAjB,CAAsBC,WAA/C;AACAH,EAAAA,MAAM,CAAC,GAAD,CAAN,GAAcA,MAAM,CAAC,GAAD,CAAN,KAAgBI,SAAhB,GAA4B5B,WAA5B,GAA0CwB,MAAM,CAAC,GAAD,CAA9D;AAEA,SAAO7B,SAAS,CAACgB,IAAV,CAAe,uBAAf,EAAwC;AAC3C,cAAUY,MADiC;AAE3C,cAAUC;AAFiC,GAAxC,EAGJT,IAHI,CAGC,UAAAP,IAAI,EAAI;AACZ,WAAOA,IAAI,CAACA,IAAL,CAAUqB,QAAjB;AACH,GALM,EAKJZ,KALI,CAKE,UAAAa,KAAK,EAAI;AACd,WAAOA,KAAP;AACH,GAPM,CAAP;AAQH,CAZM","sourcesContent":["import VKConnectOld from \"@vkontakte/vk-connect\";\r\nimport VKConnect from \"@vkontakte/vkui-connect-promise\";\r\n\r\nimport {store} from \"../../index\";\r\n\r\nimport {setColorScheme, setAccessToken} from \"../store/vk/actions\";\r\n\r\nconst APP_ID = 6984089;\r\nconst API_VERSION = '5.92';\r\n\r\nexport const initApp = () => (dispatch) => {\r\n    const VKConnectOldCallback = (e) => {\r\n        if (e.detail.type === 'VKWebAppUpdateConfig') {\r\n            VKConnectOld.unsubscribe(VKConnectOldCallback);\r\n\r\n            dispatch(setColorScheme(e.detail.data.scheme));\r\n        }\r\n    };\r\n\r\n    VKConnectOld.subscribe(VKConnectOldCallback);\r\n    VKConnect.send('VKWebAppInit', {});\r\n};\r\n\r\nexport const getAuthToken = (scope) => (dispatch) => {\r\n    VKConnect.send(\"VKWebAppGetAuthToken\", {\r\n        \"app_id\": APP_ID,\r\n        \"scope\": scope.join(',')\r\n    }).then(data => {\r\n        dispatch(setAccessToken(data.data.access_token));\r\n    }).catch(() => {\r\n        dispatch(setAccessToken(null));\r\n    });\r\n};\r\n\r\nexport const closeApp = () => {\r\n    VKConnect.send(\"VKWebAppClose\", {\"status\": \"success\"});\r\n};\r\n\r\nexport const swipeBackOn = () => {\r\n    VKConnect.send(\"VKWebAppEnableSwipeBack\", {});\r\n};\r\n\r\nexport const swipeBackOff = () => {\r\n    VKConnect.send(\"VKWebAppDisableSwipeBack\", {});\r\n};\r\n\r\nexport const groupsGet = () => {\r\n    return APICall('groups.get', {\r\n        \"extended\": \"1\",\r\n        \"fields\": \"description\",\r\n        \"count\": \"100\"\r\n    });\r\n};\r\n\r\nexport const APICall = (method, params) => {\r\n    params['access_token'] = store.getState().vkui.accessToken;\r\n    params['v'] = params['v'] === undefined ? API_VERSION : params['v'];\r\n\r\n    return VKConnect.send(\"VKWebAppCallAPIMethod\", {\r\n        \"method\": method,\r\n        \"params\": params\r\n    }).then(data => {\r\n        return data.data.response;\r\n    }).catch(error => {\r\n        return error;\r\n    });\r\n};"]},"metadata":{},"sourceType":"module"}